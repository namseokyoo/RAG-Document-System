================================================================================
Phase 3-4 성능 비교 테스트
================================================================================

[INFO] 테스트 쿼리: 7개
[INFO] 기존 임베딩된 문서 사용 (data/chroma_db)


================================================================================
1단계: 기준선 테스트 (Phase 1-2만, Hybrid OFF)
================================================================================

================================================================================
테스트 시나리오: 기준선 (Phase 1-2)
Hybrid Search: OFF
================================================================================
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 4자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[VectorStore] 임베딩 모델 차원: 1024
[VectorStore] BM25 인덱스 구축 완료: 120개 문서
[LLM] 모델 'gemma3:latest' 확인됨

[쿼리 1/7] TADF 재료는?
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined

[쿼리 2/7] ACRSA 효율은?
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined

[쿼리 3/7] kFRET 값은?
------------------------------------------------------------
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 9자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 5.65s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 9자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 4.03s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 3665자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '당신은 문서에서 구체적인 정보를 추출하는 전문가입니다. 제공된 문서에서 정확한 사실, 수치, 이름, 구조 등을 찾아 답변해주세요.\n\n⚠️ 핵심 규칙:\n- 제공된 문서에서만 정보를 찾으세요 (일반 지식 사용 금지)\n- "정보를 찾을 수 없습니다"는 절대 사용하지 마세요\n- 문서에 관련 정보가 있으면 반드시 찾아 제시하세요\n\n이전 대화 내용:\n이전 대화 없음\n\n참고 문서:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #1\n   파일명: HF_OLED_Nature_Photonics_2024_20251027130521.pptx\n   페이지: 42\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[이전 슬라이드] 제목 없음\n\n[현재 슬라이드]\n\n[본문]:\n산업적 의미와 기대효과 - OLED 전문가 관점\n\n[본문]:\nMaterial Screening Criteria 패러다임 전환\n\n[본문]:\n분자 구조의 강직성(Rigidity)과 긴 여기상태 수명(τPF > 300ns)을 우선시하는 새로운 설계 지표\n\n[본문]:\n소자 구조 최적화\n\n[본문]:\n낮은 에너지 센서타이저 + 낮은 삼중항 에너지의 호스트 조합으로 LT50 2.5배 향상 (ACRSA: 28→69분)\n\n[본문]:\nHF 소자용 TADF 센서타이저 최적 규격:\n\n[본문]:\n• kRISC < kFRET (FRET 우위성 확보)\n\n[본문]:\n• kISC, kr 감소 (센서타이저 여기상태 수명 증가)\n\n[본문]:\n• Conformer 분포 최소화 (균일한 발광 에너지)\n\n[본문]:\n전력 효율 향상: 정량적 분석\n\n[본문]:\nACRSA: 28 lm/W → 36 lm/W (29% 향상)\n\n[본문]:\nAZB-TRZ: 9 lm/W → 27 lm/W (200% 향상)\n\n[본문]:\n연간 150 TWh 이상의 글로벌 가정용 전기 사용량 절감 (미국 연간 소비량의 약 3.8%)\n\n[본문]:\n*원논문 핵심 데이터 기반 - ACRSA 대비 DMAC-TRZ, AZB-TRZ의 성능 비교 (Nature Photonics, 2024)\n\n[본문]:\nHyperfluorescence OLED 기술: 초고효율 센서타이저의 핵심 요구사항 | 9\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #2\n   파일명: HF_OLED_Nature_Photonics_2024_20251027130521.pptx\n   페이지: 23\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[본문]:\nAZB-TRZ: 12→30 cd/A, 9→27 lm/W\n\n[본문]:\nACRSA: 28→69분 (2,500 cd/m²) ×2.5↑\n\n[본문]:\nDMAC-TRZ: 34→8.5시간 (1,500 cd/m²) ×4.0↓\n\n[본문]:\nFigure 4. (a) 에너지 다이어그램, (b,c) TADF와 HF-OLEDs의 EL 스펙트럼, (d,e,f) 각 센서타이저별 EQE vs 휘도 그래프. ACRSA HF-OLED의 경우 99% 이상 완벽한 FRET 달성.\n\n[본문]:\nEL 스펙트럼 분석: ACRSA HF-OLEDs(Fig. 4c)에서는 완벽한 FRET 달성(센서타이저 발광 없음), DMAC-TRZ(Fig. 4b)에서는 510nm 부근에서 잔류 센서타이저 발광이 관찰됨\n\n[본문]:\n속도 상수 영향: ACRSA (kFRET > kISC, kF) vs. DMAC-TRZ (kFRET < kISC, kF)로 인한 FRET 효율 차이 (ACRSA: 87.8%, DMAC-TRZ: 28.2%)\n\n[본문]:\nHyperfluorescence OLED 기술: 초고효율 센서타이저의 핵심 요구사항 | 6\n\n[다음 슬라이드] 제목 없음\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #3\n   파일명: HF_OLED_Nature_Photonics_2024_20251027130521.pptx\n   페이지: 1\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[현재 슬라이드]\n\n[본문]:\nKey requirements for ultraefficient sensitization in hyperfluorescence organic light-emitting diodes\n\n[본문]:\nKleitos Stavrou, Larissa G. Franca, Andrew Danos, Andrew P. Monkman\n\n[본문]:\nNature Photonics (2024)\n\n[본문]:\nFRET (Förster Resonance Energy Transfer)\n\n[본문]:\nTADF Sensitizer\n\n[본문]:\nη\n\n[본문]:\n= 87.8% (ACRSA)\n\n[본문]:\nEQE: 11% → 28.5%\n\n[본문]:\nFRET\n\n[본문]:\nHyperfluorescence OLED 기술: 초고효율 센서타이저의 핵심 요구사항\n\n[다음 슬라이드] 제목 없음\n\n현재 질문: kFRET 값은?\n\nFew-Shot 예시:\n\n[좋은 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: \n## 답변\n제공된 문서에 따르면, 논문에서 ACRSA (spiro-linked TADF molecule)를 사용했습니다. 비교 실험을 위해 DABNA1도 언급되어 있습니다.\n\n## 상세 설명\n문서에서 TADF 재료로 ACRSA가 명시적으로 사용되었다고 나와 있으며, \'ACRSA-based device\'라는 표현으로 확인할 수 있습니다.\n\n## 참조 정보\n- ACRSA 사용: 문서 #1, 페이지 3 / 섹션 "재료 및 방법"\n- DABNA1 비교: 문서 #1, 페이지 4 / 섹션 "실험 결과"\n\n[나쁜 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: "죄송하지만 제공된 문서에서는 TADF 재료에 대한 구체적인 언급을 찾을 수 없습니다." (❌ 이렇게 답변하지 마세요)\n\n답변 절차:\n1단계 [키워드 식별]: 질문의 핵심 키워드를 식별하고, 동의어나 약어도 고려하여 문서에서 검색하세요.\n2단계 [정보 검색]: 제공된 문서의 모든 내용을 꼼꼼히 읽고 관련 정보를 찾으세요.\n3단계 [정보 추출]: 관련된 모든 정보를 찾아 나열하세요 (여러 곳에 있으면 모두 포함).\n4단계 [출처 명시]: 각 정보마다 원문을 인용하고, 페이지/섹션 정보를 명시하세요.\n5단계 [정확성 확인]: 구체적인 수치, 이름, 날짜는 원문 그대로 정확히 인용하세요.\n6단계 [부분 정보 처리]: 부분적으로만 찾은 경우, 찾은 부분을 명시하고 "추가 정보는 문서의 다른 부분에 있을 수 있습니다"라고 언급하세요.\n\n답변 형식 (구조화된 형식 사용):\n## 답변\n[1-2문장 요약]\n\n## 상세 설명\n[구체적 사실 나열]\n\n## 참조 정보\n- [사실 1]: [출처]\n- [사실 2]: [출처]\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 185자
[OK] 답변: ## 답변
제공된 문서에 따르면, kFRET 값은 87.8%입니다.

## 상세 설명
문서 #3의 슬라이드에 "η = 87.8% (ACRSA)"라고 명시되어 있습니다. 이는 ACRSA (ACRSA-based device)의 FRET 효율을 나타냅니다.

## 참조 정보...
[STAT] 신뢰도: 8400.0%
[INFO] 출처: 3개 문서
[TIME] 응답 시간: 27.62초

[쿼리 4/7] 논문의 핵심 결론은?
------------------------------------------------------------
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 1014자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '당신은 문서를 요약하는 전문가입니다. 제공된 문서의 핵심 내용을 체계적으로 요약해주세요.\n\n⚠️ 핵심 규칙:\n- 제공된 문서 내용만을 바탕으로 요약하세요 (일반 지식 추가 금지)\n- 문서의 구체적인 내용을 인용하여 요약하세요\n- "문서에 정보가 없습니다"는 사용하지 마세요\n\n이전 대화 내용:\n이전 대화 없음\n\n참고 문서:\n\n\n현재 질문: 논문의 핵심 결론은?\n\nFew-Shot 예시:\n\n[좋은 요약 예시]\n질문: "이 논문의 핵심 내용을 요약해주세요."\n답변:\n## 답변\n이 논문은 TADF 재료를 사용한 OLED 디바이스의 효율 개선에 관한 연구로, ACRSA 기반 디바이스를 통해 높은 발광 효율을 달성했다고 보고합니다.\n\n## 상세 설명\n논문은 다음과 같은 주요 내용을 포함합니다:\n1. TADF 재료의 특성과 장점\n2. ACRSA 재료를 사용한 디바이스 제작\n3. 발광 효율 측정 결과 및 분석\n4. 기존 재료 대비 성능 비교\n\n## 참조 정보\n- TADF 재료 특성: 문서 #1, 페이지 2 / 섹션 "서론"\n- ACRSA 디바이스: 문서 #1, 페이지 3 / 섹션 "재료 및 방법"\n- 효율 측정: 문서 #1, 페이지 5 / 섹션 "결과 및 토론"\n\n답변 절차:\n1단계 [구조 파악]: 제공된 문서의 구조를 파악하세요 (제목, 섹션, 하위 섹션 등).\n2단계 [핵심 추출]: 각 섹션의 핵심 내용을 문서에서 직접 추출하세요.\n3단계 [내용 정리]: 주요 발견, 결론, 수치 등을 논리적 순서로 정리하세요.\n4단계 [출처 명시]: 모든 내용에 원문 출처를 명시하세요 (페이지/섹션).\n5단계 [일관성 확인]: 문서에 명시되지 않은 내용이 포함되지 않았는지 확인하세요.\n\n답변 형식:\n## 답변\n[핵심 내용 1-2문장 요약]\n\n## 상세 설명\n1. [주요 내용 1]\n2. [주요 내용 2]\n3. [주요 내용 3]\n\n## 참조 정보\n- [내용 1]: [출처]\n- [내용 2]: [출처]\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 354자
[OK] 답변: ## 답변
이 논문은 ACRSA 기반의 OLED 디바이스가 TADF 재료를 사용하여 높은 발광 효율을 달성했다고 결론짓습니다.

## 상세 설명
1. 논문은 TADF 재료를 활용하여 OLED 디바이스의 발광 효율을 향상시키는 방법을 제시합니다.
2. 특히, ACRSA ...
[STAT] 신뢰도: 8400.0%
[INFO] 출처: 3개 문서
[TIME] 응답 시간: 7.64초

[쿼리 5/7] 분자 구조와 성능의 관계는?
------------------------------------------------------------
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 15자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 5.46s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 15자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 2.43s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 3071자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '당신은 문서에서 구체적인 정보를 추출하는 전문가입니다. 제공된 문서에서 정확한 사실, 수치, 이름, 구조 등을 찾아 답변해주세요.\n\n⚠️ 핵심 규칙:\n- 제공된 문서에서만 정보를 찾으세요 (일반 지식 사용 금지)\n- "정보를 찾을 수 없습니다"는 절대 사용하지 마세요\n- 문서에 관련 정보가 있으면 반드시 찾아 제시하세요\n\n이전 대화 내용:\n이전 대화 없음\n\n참고 문서:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #1\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 7\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 11 12 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n6. 출결관리 앱 사용법(부가기능) 7. 휴대전화 설정\n\uf000 전송이력조회 \uf000 모의위치 설정 해제\n○ 출결관리 앱을 이용하여 출결 처리한 이력 정보 조회 ○ 출결관리 앱(app) 서비스는 훈련생 부정출결을 방지하기 위하여 스마트폰\n모의위치 기능을 허용하지 않습니다.\n\uf000 재전송조회\n○ 앱 이용시 시스템 장애로 인한 출결 전송 실패 시 재전송 기능\n\uf000 수강강좌\n○ 강좌에 대한 기본정보 조회\n⇒ [해결방법] (핸드폰)설정 ⇒ 개발자옵션 ⇒ 모의 위치 허용(해제)\n(*메뉴 위치는 제조사 및 OS의 버전에 따라 상이할 수 있습니다)\n(삼성-Android 4.4.2)\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #2\n   파일명: lgd_display_news_2025_oct_20251019133222.pptx\n   페이지: 9\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[이전 슬라이드] 제목 없음\n\n[현재 슬라이드]\n\n[본문]:\nLG디스플레이, OLED 기술 유출 정황 포착…업계 비상\n\n[본문]:\n디스플레이 산업 뉴스\n\n[본문]:\n10월 2일\n\n[본문]:\n2명\n\n[본문]:\n연이은 기술 유출\n\n[본문]:\n최대 15년 징역\n\n[본문]:\n30억원 이하 벌금\n\n[본문]:\n경기 파주 LG디스플레이 공장 압수수색 진행\n\n[본문]:\n직원\n\n[본문]:\n의 기술 자료 외부 유출 혐의 포착\n\n[본문]:\n내부 보안 점검 중 이상 징후 발견, 경찰에 신고\n\n[본문]:\n삼성디스플레이에 이어\n\n[본문]:\n, 업계 전반 경계 강화\n\n[본문]:\n국가 핵심기술 유출 시\n\n[본문]:\n또는\n\n[본문]:\n보안 경고\n\n[본문]:\n산업기술 보호가\n\n[본문]:\n국가 경쟁력의 핵심입니다\n\n[본문]:\n최대 15년 징역형\n\n[본문]:\n출처:\n\n[본문]:\n쿠키뉴스 (2025.10.13)\n\n[다음 슬라이드] 제목 없음\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #3\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 6\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 9 10 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n5. 출결관리 앱 사용법(기본)\n\uf000 입실/퇴실 출결체크\n\uf000 출결관리 앱(app) 실행 및 로그인 ○ 훈련과정 목록에서 입실/퇴실 구분을 선택하면 스마트폰 카메라가 실행되어\n○ 출결관리 앱(app) 실행 후 HRD-Net 회원아이디와 비밀번호를 입력한 후 QR코드를 스캔할 수 있습니다\n확인 버튼을 클릭합니다.\n○ QR코드를 스캔하면 자동으로 출결 전송 됩니다\n\uf000 훈련과정목록\n○ 훈련실시일자에 훈련장소에 도착하면 자동으로 훈련과정이 조회됩니다\n\n현재 질문: 분자 구조와 성능의 관계는?\n\nFew-Shot 예시:\n\n[좋은 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: \n## 답변\n제공된 문서에 따르면, 논문에서 ACRSA (spiro-linked TADF molecule)를 사용했습니다. 비교 실험을 위해 DABNA1도 언급되어 있습니다.\n\n## 상세 설명\n문서에서 TADF 재료로 ACRSA가 명시적으로 사용되었다고 나와 있으며, \'ACRSA-based device\'라는 표현으로 확인할 수 있습니다.\n\n## 참조 정보\n- ACRSA 사용: 문서 #1, 페이지 3 / 섹션 "재료 및 방법"\n- DABNA1 비교: 문서 #1, 페이지 4 / 섹션 "실험 결과"\n\n[나쁜 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: "죄송하지만 제공된 문서에서는 TADF 재료에 대한 구체적인 언급을 찾을 수 없습니다." (❌ 이렇게 답변하지 마세요)\n\n답변 절차:\n1단계 [키워드 식별]: 질문의 핵심 키워드를 식별하고, 동의어나 약어도 고려하여 문서에서 검색하세요.\n2단계 [정보 검색]: 제공된 문서의 모든 내용을 꼼꼼히 읽고 관련 정보를 찾으세요.\n3단계 [정보 추출]: 관련된 모든 정보를 찾아 나열하세요 (여러 곳에 있으면 모두 포함).\n4단계 [출처 명시]: 각 정보마다 원문을 인용하고, 페이지/섹션 정보를 명시하세요.\n5단계 [정확성 확인]: 구체적인 수치, 이름, 날짜는 원문 그대로 정확히 인용하세요.\n6단계 [부분 정보 처리]: 부분적으로만 찾은 경우, 찾은 부분을 명시하고 "추가 정보는 문서의 다른 부분에 있을 수 있습니다"라고 언급하세요.\n\n답변 형식 (구조화된 형식 사용):\n## 답변\n[1-2문장 요약]\n\n## 상세 설명\n[구체적 사실 나열]\n\n## 참조 정보\n- [사실 1]: [출처]\n- [사실 2]: [출처]\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 443자
⚠️ 답변 검증 실패: 금지 구문 사용, 문서 내용과 불일치
🔄 문서 기반 재생성 시도...
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 2535자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '이전에 생성된 답변이 문서 기반이 아니었습니다. 제공된 문서만을 사용하여 다시 답변하세요.\n\n⚠️ 중요 규칙:\n1. **문서 우선**: 반드시 제공된 문서에서만 정보를 찾으세요\n2. **금지 구문**: "정보를 찾을 수 없습니다", "없습니다"는 절대 사용하지 마세요\n3. **문서 인용**: 반드시 문서의 내용을 인용하고 페이지/파일 정보를 명시하세요\n4. **구체성**: 문서의 구체적인 수치, 이름, 내용을 정확히 인용하세요\n\n이전 대화:\n이전 대화 없음\n\n제공된 문서:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #1\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 7\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 11 12 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n6. 출결관리 앱 사용법(부가기능) 7. 휴대전화 설정\n\uf000 전송이력조회 \uf000 모의위치 설정 해제\n○ 출결관리 앱을 이용하여 출결 처리한 이력 정보 조회 ○ 출결관리 앱(app) 서비스는 훈련생 부정출결을 방지하기 위하여 스마트폰\n모의위치 기능을 허용하지 않습니다.\n\uf000 재전송조회\n○ 앱 이용시 시스템 장애로 인한 출결 전송 실패 시 재전송 기능\n\uf000 수강강좌\n○ 강좌에 대한 기본정보 조회\n⇒ [해결방법] (핸드폰)설정 ⇒ 개발자옵션 ⇒ 모의 위치 허용(해제)\n(*메뉴 위치는 제조사 및 OS의 버전에 따라 상이할 수 있습니다)\n(삼성-Android 4.4.2)\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #2\n   파일명: lgd_display_news_2025_oct_20251019133222.pptx\n   페이지: 9\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[이전 슬라이드] 제목 없음\n\n[현재 슬라이드]\n\n[본문]:\nLG디스플레이, OLED 기술 유출 정황 포착…업계 비상\n\n[본문]:\n디스플레이 산업 뉴스\n\n[본문]:\n10월 2일\n\n[본문]:\n2명\n\n[본문]:\n연이은 기술 유출\n\n[본문]:\n최대 15년 징역\n\n[본문]:\n30억원 이하 벌금\n\n[본문]:\n경기 파주 LG디스플레이 공장 압수수색 진행\n\n[본문]:\n직원\n\n[본문]:\n의 기술 자료 외부 유출 혐의 포착\n\n[본문]:\n내부 보안 점검 중 이상 징후 발견, 경찰에 신고\n\n[본문]:\n삼성디스플레이에 이어\n\n[본문]:\n, 업계 전반 경계 강화\n\n[본문]:\n국가 핵심기술 유출 시\n\n[본문]:\n또는\n\n[본문]:\n보안 경고\n\n[본문]:\n산업기술 보호가\n\n[본문]:\n국가 경쟁력의 핵심입니다\n\n[본문]:\n최대 15년 징역형\n\n[본문]:\n출처:\n\n[본문]:\n쿠키뉴스 (2025.10.13)\n\n[다음 슬라이드] 제목 없음\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #3\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 6\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 9 10 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n5. 출결관리 앱 사용법(기본)\n\uf000 입실/퇴실 출결체크\n\uf000 출결관리 앱(app) 실행 및 로그인 ○ 훈련과정 목록에서 입실/퇴실 구분을 선택하면 스마트폰 카메라가 실행되어\n○ 출결관리 앱(app) 실행 후 HRD-Net 회원아이디와 비밀번호를 입력한 후 QR코드를 스캔할 수 있습니다\n확인 버튼을 클릭합니다.\n○ QR코드를 스캔하면 자동으로 출결 전송 됩니다\n\uf000 훈련과정목록\n○ 훈련실시일자에 훈련장소에 도착하면 자동으로 훈련과정이 조회됩니다\n\n질문:\n분자 구조와 성능의 관계는?\n\n이전 답변 (참고용, 개선 필요):\n## 답변\n질문: “분자 구조와 성능의 관계는?”\n\n## 상세 설명\n제공된 문서에는 분자 구조와 성능의 직접적인 관계에 대한 구체적인 정보는 없습니다. 하지만 HRD-Net 출결관리 앱 사용법(기본) 문서(#3, 페이지 6)에서 “훈련과정목록”을 조회할 때 “QR코드를 스캔하면 자동으로 출결 전송 됩니다”라고 언급하고 있습니다. 이는 훈련과정의 정보가 훈련생의 출결과 연관되어 있음을 시사합니다. 또한, LG디스플레이 기술 유출 관련 문서(#2)에서는 국가 핵심기술 유출 시 산업기술 보호가 국가 경쟁력의 핵심임을 강조하고 있습니다. 이는 분자 구조와 관련된 기술이 국가 경쟁력에 영향을 미칠 수 있음을 암시합니다.\n\n## 참조 정보\n- 훈련과정 목록 및 QR코드 스캔: 문서 #3, 페이지 6 / 섹션 "출결 관리"\n- 기술 유출 시 국가 경쟁력: 문서 #2, 페이지 9 / 섹션 "본문"\n\n위 이전 답변을 개선하여, 제공된 문서에 근거한 구체적이고 명확한 답변을 작성하세요.\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 323자
✅ 답변 재생성 완료
[OK] 답변: ## 답변

질문: “분자 구조와 성능의 관계는?”

제공된 문서에는 분자 구조와 성능의 직접적인 관계에 대한 구체적인 정보는 없습니다. HRD-Net 출결관리 앱 사용법(기본) 문서(#3, 페이지 6)에서 훈련과정목록을 조회하고 QR코드를 스캔하여 출결 전송이 이루어...
[STAT] 신뢰도: 8400.0%
[INFO] 출처: 3개 문서
[TIME] 응답 시간: 37.89초

[쿼리 6/7] DMAC-TRZ와 ACRSA를 비교해주세요
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined

[쿼리 7/7] FRET 효율을 향상시키는 방법은?
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined


================================================================================
2단계: Phase 3-4 테스트 (Hybrid ON)
================================================================================

================================================================================
테스트 시나리오: Phase 3-4 적용
Hybrid Search: ON
================================================================================
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 4자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[VectorStore] 임베딩 모델 차원: 1024
[VectorStore] BM25 인덱스 구축 완료: 120개 문서
[LLM] 모델 'gemma3:latest' 확인됨
[HybridRetriever] 초기화 완료 (BM25:0.5 / Vector:0.5)
[HybridRetriever] BM25 인덱스 구축 완료: 120개 문서

[쿼리 1/7] TADF 재료는?
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined

[쿼리 2/7] ACRSA 효율은?
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined

[쿼리 3/7] kFRET 값은?
------------------------------------------------------------
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 9자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 60자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 2.82s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 9자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 2.28s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 3665자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '당신은 문서에서 구체적인 정보를 추출하는 전문가입니다. 제공된 문서에서 정확한 사실, 수치, 이름, 구조 등을 찾아 답변해주세요.\n\n⚠️ 핵심 규칙:\n- 제공된 문서에서만 정보를 찾으세요 (일반 지식 사용 금지)\n- "정보를 찾을 수 없습니다"는 절대 사용하지 마세요\n- 문서에 관련 정보가 있으면 반드시 찾아 제시하세요\n\n이전 대화 내용:\n이전 대화 없음\n\n참고 문서:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #1\n   파일명: HF_OLED_Nature_Photonics_2024_20251027130521.pptx\n   페이지: 42\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[이전 슬라이드] 제목 없음\n\n[현재 슬라이드]\n\n[본문]:\n산업적 의미와 기대효과 - OLED 전문가 관점\n\n[본문]:\nMaterial Screening Criteria 패러다임 전환\n\n[본문]:\n분자 구조의 강직성(Rigidity)과 긴 여기상태 수명(τPF > 300ns)을 우선시하는 새로운 설계 지표\n\n[본문]:\n소자 구조 최적화\n\n[본문]:\n낮은 에너지 센서타이저 + 낮은 삼중항 에너지의 호스트 조합으로 LT50 2.5배 향상 (ACRSA: 28→69분)\n\n[본문]:\nHF 소자용 TADF 센서타이저 최적 규격:\n\n[본문]:\n• kRISC < kFRET (FRET 우위성 확보)\n\n[본문]:\n• kISC, kr 감소 (센서타이저 여기상태 수명 증가)\n\n[본문]:\n• Conformer 분포 최소화 (균일한 발광 에너지)\n\n[본문]:\n전력 효율 향상: 정량적 분석\n\n[본문]:\nACRSA: 28 lm/W → 36 lm/W (29% 향상)\n\n[본문]:\nAZB-TRZ: 9 lm/W → 27 lm/W (200% 향상)\n\n[본문]:\n연간 150 TWh 이상의 글로벌 가정용 전기 사용량 절감 (미국 연간 소비량의 약 3.8%)\n\n[본문]:\n*원논문 핵심 데이터 기반 - ACRSA 대비 DMAC-TRZ, AZB-TRZ의 성능 비교 (Nature Photonics, 2024)\n\n[본문]:\nHyperfluorescence OLED 기술: 초고효율 센서타이저의 핵심 요구사항 | 9\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #2\n   파일명: HF_OLED_Nature_Photonics_2024_20251027130521.pptx\n   페이지: 23\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[본문]:\nAZB-TRZ: 12→30 cd/A, 9→27 lm/W\n\n[본문]:\nACRSA: 28→69분 (2,500 cd/m²) ×2.5↑\n\n[본문]:\nDMAC-TRZ: 34→8.5시간 (1,500 cd/m²) ×4.0↓\n\n[본문]:\nFigure 4. (a) 에너지 다이어그램, (b,c) TADF와 HF-OLEDs의 EL 스펙트럼, (d,e,f) 각 센서타이저별 EQE vs 휘도 그래프. ACRSA HF-OLED의 경우 99% 이상 완벽한 FRET 달성.\n\n[본문]:\nEL 스펙트럼 분석: ACRSA HF-OLEDs(Fig. 4c)에서는 완벽한 FRET 달성(센서타이저 발광 없음), DMAC-TRZ(Fig. 4b)에서는 510nm 부근에서 잔류 센서타이저 발광이 관찰됨\n\n[본문]:\n속도 상수 영향: ACRSA (kFRET > kISC, kF) vs. DMAC-TRZ (kFRET < kISC, kF)로 인한 FRET 효율 차이 (ACRSA: 87.8%, DMAC-TRZ: 28.2%)\n\n[본문]:\nHyperfluorescence OLED 기술: 초고효율 센서타이저의 핵심 요구사항 | 6\n\n[다음 슬라이드] 제목 없음\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #3\n   파일명: HF_OLED_Nature_Photonics_2024_20251027130521.pptx\n   페이지: 1\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[현재 슬라이드]\n\n[본문]:\nKey requirements for ultraefficient sensitization in hyperfluorescence organic light-emitting diodes\n\n[본문]:\nKleitos Stavrou, Larissa G. Franca, Andrew Danos, Andrew P. Monkman\n\n[본문]:\nNature Photonics (2024)\n\n[본문]:\nFRET (Förster Resonance Energy Transfer)\n\n[본문]:\nTADF Sensitizer\n\n[본문]:\nη\n\n[본문]:\n= 87.8% (ACRSA)\n\n[본문]:\nEQE: 11% → 28.5%\n\n[본문]:\nFRET\n\n[본문]:\nHyperfluorescence OLED 기술: 초고효율 센서타이저의 핵심 요구사항\n\n[다음 슬라이드] 제목 없음\n\n현재 질문: kFRET 값은?\n\nFew-Shot 예시:\n\n[좋은 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: \n## 답변\n제공된 문서에 따르면, 논문에서 ACRSA (spiro-linked TADF molecule)를 사용했습니다. 비교 실험을 위해 DABNA1도 언급되어 있습니다.\n\n## 상세 설명\n문서에서 TADF 재료로 ACRSA가 명시적으로 사용되었다고 나와 있으며, \'ACRSA-based device\'라는 표현으로 확인할 수 있습니다.\n\n## 참조 정보\n- ACRSA 사용: 문서 #1, 페이지 3 / 섹션 "재료 및 방법"\n- DABNA1 비교: 문서 #1, 페이지 4 / 섹션 "실험 결과"\n\n[나쁜 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: "죄송하지만 제공된 문서에서는 TADF 재료에 대한 구체적인 언급을 찾을 수 없습니다." (❌ 이렇게 답변하지 마세요)\n\n답변 절차:\n1단계 [키워드 식별]: 질문의 핵심 키워드를 식별하고, 동의어나 약어도 고려하여 문서에서 검색하세요.\n2단계 [정보 검색]: 제공된 문서의 모든 내용을 꼼꼼히 읽고 관련 정보를 찾으세요.\n3단계 [정보 추출]: 관련된 모든 정보를 찾아 나열하세요 (여러 곳에 있으면 모두 포함).\n4단계 [출처 명시]: 각 정보마다 원문을 인용하고, 페이지/섹션 정보를 명시하세요.\n5단계 [정확성 확인]: 구체적인 수치, 이름, 날짜는 원문 그대로 정확히 인용하세요.\n6단계 [부분 정보 처리]: 부분적으로만 찾은 경우, 찾은 부분을 명시하고 "추가 정보는 문서의 다른 부분에 있을 수 있습니다"라고 언급하세요.\n\n답변 형식 (구조화된 형식 사용):\n## 답변\n[1-2문장 요약]\n\n## 상세 설명\n[구체적 사실 나열]\n\n## 참조 정보\n- [사실 1]: [출처]\n- [사실 2]: [출처]\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 185자
[OK] 답변: ## 답변
제공된 문서에 따르면, kFRET 값은 87.8%입니다.

## 상세 설명
문서 #3의 슬라이드에 "η = 87.8% (ACRSA)"라고 명시되어 있습니다. 이는 ACRSA (ACRSA-based device)의 FRET 효율을 나타냅니다.

## 참조 정보...
[STAT] 신뢰도: 8400.0%
[INFO] 출처: 3개 문서
[TIME] 응답 시간: 21.82초

[쿼리 4/7] 논문의 핵심 결론은?
------------------------------------------------------------
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 1014자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '당신은 문서를 요약하는 전문가입니다. 제공된 문서의 핵심 내용을 체계적으로 요약해주세요.\n\n⚠️ 핵심 규칙:\n- 제공된 문서 내용만을 바탕으로 요약하세요 (일반 지식 추가 금지)\n- 문서의 구체적인 내용을 인용하여 요약하세요\n- "문서에 정보가 없습니다"는 사용하지 마세요\n\n이전 대화 내용:\n이전 대화 없음\n\n참고 문서:\n\n\n현재 질문: 논문의 핵심 결론은?\n\nFew-Shot 예시:\n\n[좋은 요약 예시]\n질문: "이 논문의 핵심 내용을 요약해주세요."\n답변:\n## 답변\n이 논문은 TADF 재료를 사용한 OLED 디바이스의 효율 개선에 관한 연구로, ACRSA 기반 디바이스를 통해 높은 발광 효율을 달성했다고 보고합니다.\n\n## 상세 설명\n논문은 다음과 같은 주요 내용을 포함합니다:\n1. TADF 재료의 특성과 장점\n2. ACRSA 재료를 사용한 디바이스 제작\n3. 발광 효율 측정 결과 및 분석\n4. 기존 재료 대비 성능 비교\n\n## 참조 정보\n- TADF 재료 특성: 문서 #1, 페이지 2 / 섹션 "서론"\n- ACRSA 디바이스: 문서 #1, 페이지 3 / 섹션 "재료 및 방법"\n- 효율 측정: 문서 #1, 페이지 5 / 섹션 "결과 및 토론"\n\n답변 절차:\n1단계 [구조 파악]: 제공된 문서의 구조를 파악하세요 (제목, 섹션, 하위 섹션 등).\n2단계 [핵심 추출]: 각 섹션의 핵심 내용을 문서에서 직접 추출하세요.\n3단계 [내용 정리]: 주요 발견, 결론, 수치 등을 논리적 순서로 정리하세요.\n4단계 [출처 명시]: 모든 내용에 원문 출처를 명시하세요 (페이지/섹션).\n5단계 [일관성 확인]: 문서에 명시되지 않은 내용이 포함되지 않았는지 확인하세요.\n\n답변 형식:\n## 답변\n[핵심 내용 1-2문장 요약]\n\n## 상세 설명\n1. [주요 내용 1]\n2. [주요 내용 2]\n3. [주요 내용 3]\n\n## 참조 정보\n- [내용 1]: [출처]\n- [내용 2]: [출처]\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 423자
[OK] 답변: ## 답변
이 논문은 ACRSA 기반의 OLED 디바이스가 TADF 재료를 사용하여 높은 발광 효율을 달성할 수 있음을 보여줍니다.

## 상세 설명
1. 논문은 TADF (Temperature-Dependent Fluorescence) 재료를 활용하여 OLED 디바이...
[STAT] 신뢰도: 8400.0%
[INFO] 출처: 3개 문서
[TIME] 응답 시간: 7.17초

[쿼리 5/7] 분자 구조와 성능의 관계는?
------------------------------------------------------------
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 15자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 59자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 4.86s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[Embeddings] 요청 모델: mxbai-embed-large:latest
[Embeddings] 엔드포인트: http://localhost:11434/api/embeddings
[Embeddings] 텍스트 길이: 15자
[Embeddings] 응답 상태: 200
[Embeddings] 임베딩 성공: 1024차원
[Timing] context retrieval (Small-to-Large, type=specific_info): 2.18s
🔍 구체적 정보 추출 모드: Small-to-Large 검색 (쿼리 타입: specific_info)
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 3071자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '당신은 문서에서 구체적인 정보를 추출하는 전문가입니다. 제공된 문서에서 정확한 사실, 수치, 이름, 구조 등을 찾아 답변해주세요.\n\n⚠️ 핵심 규칙:\n- 제공된 문서에서만 정보를 찾으세요 (일반 지식 사용 금지)\n- "정보를 찾을 수 없습니다"는 절대 사용하지 마세요\n- 문서에 관련 정보가 있으면 반드시 찾아 제시하세요\n\n이전 대화 내용:\n이전 대화 없음\n\n참고 문서:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #1\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 7\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 11 12 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n6. 출결관리 앱 사용법(부가기능) 7. 휴대전화 설정\n\uf000 전송이력조회 \uf000 모의위치 설정 해제\n○ 출결관리 앱을 이용하여 출결 처리한 이력 정보 조회 ○ 출결관리 앱(app) 서비스는 훈련생 부정출결을 방지하기 위하여 스마트폰\n모의위치 기능을 허용하지 않습니다.\n\uf000 재전송조회\n○ 앱 이용시 시스템 장애로 인한 출결 전송 실패 시 재전송 기능\n\uf000 수강강좌\n○ 강좌에 대한 기본정보 조회\n⇒ [해결방법] (핸드폰)설정 ⇒ 개발자옵션 ⇒ 모의 위치 허용(해제)\n(*메뉴 위치는 제조사 및 OS의 버전에 따라 상이할 수 있습니다)\n(삼성-Android 4.4.2)\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #2\n   파일명: lgd_display_news_2025_oct_20251019133222.pptx\n   페이지: 9\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[이전 슬라이드] 제목 없음\n\n[현재 슬라이드]\n\n[본문]:\nLG디스플레이, OLED 기술 유출 정황 포착…업계 비상\n\n[본문]:\n디스플레이 산업 뉴스\n\n[본문]:\n10월 2일\n\n[본문]:\n2명\n\n[본문]:\n연이은 기술 유출\n\n[본문]:\n최대 15년 징역\n\n[본문]:\n30억원 이하 벌금\n\n[본문]:\n경기 파주 LG디스플레이 공장 압수수색 진행\n\n[본문]:\n직원\n\n[본문]:\n의 기술 자료 외부 유출 혐의 포착\n\n[본문]:\n내부 보안 점검 중 이상 징후 발견, 경찰에 신고\n\n[본문]:\n삼성디스플레이에 이어\n\n[본문]:\n, 업계 전반 경계 강화\n\n[본문]:\n국가 핵심기술 유출 시\n\n[본문]:\n또는\n\n[본문]:\n보안 경고\n\n[본문]:\n산업기술 보호가\n\n[본문]:\n국가 경쟁력의 핵심입니다\n\n[본문]:\n최대 15년 징역형\n\n[본문]:\n출처:\n\n[본문]:\n쿠키뉴스 (2025.10.13)\n\n[다음 슬라이드] 제목 없음\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #3\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 6\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 9 10 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n5. 출결관리 앱 사용법(기본)\n\uf000 입실/퇴실 출결체크\n\uf000 출결관리 앱(app) 실행 및 로그인 ○ 훈련과정 목록에서 입실/퇴실 구분을 선택하면 스마트폰 카메라가 실행되어\n○ 출결관리 앱(app) 실행 후 HRD-Net 회원아이디와 비밀번호를 입력한 후 QR코드를 스캔할 수 있습니다\n확인 버튼을 클릭합니다.\n○ QR코드를 스캔하면 자동으로 출결 전송 됩니다\n\uf000 훈련과정목록\n○ 훈련실시일자에 훈련장소에 도착하면 자동으로 훈련과정이 조회됩니다\n\n현재 질문: 분자 구조와 성능의 관계는?\n\nFew-Shot 예시:\n\n[좋은 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: \n## 답변\n제공된 문서에 따르면, 논문에서 ACRSA (spiro-linked TADF molecule)를 사용했습니다. 비교 실험을 위해 DABNA1도 언급되어 있습니다.\n\n## 상세 설명\n문서에서 TADF 재료로 ACRSA가 명시적으로 사용되었다고 나와 있으며, \'ACRSA-based device\'라는 표현으로 확인할 수 있습니다.\n\n## 참조 정보\n- ACRSA 사용: 문서 #1, 페이지 3 / 섹션 "재료 및 방법"\n- DABNA1 비교: 문서 #1, 페이지 4 / 섹션 "실험 결과"\n\n[나쁜 답변 예시]\n질문: "논문에서 사용한 TADF 재료는 무엇인가?"\n답변: "죄송하지만 제공된 문서에서는 TADF 재료에 대한 구체적인 언급을 찾을 수 없습니다." (❌ 이렇게 답변하지 마세요)\n\n답변 절차:\n1단계 [키워드 식별]: 질문의 핵심 키워드를 식별하고, 동의어나 약어도 고려하여 문서에서 검색하세요.\n2단계 [정보 검색]: 제공된 문서의 모든 내용을 꼼꼼히 읽고 관련 정보를 찾으세요.\n3단계 [정보 추출]: 관련된 모든 정보를 찾아 나열하세요 (여러 곳에 있으면 모두 포함).\n4단계 [출처 명시]: 각 정보마다 원문을 인용하고, 페이지/섹션 정보를 명시하세요.\n5단계 [정확성 확인]: 구체적인 수치, 이름, 날짜는 원문 그대로 정확히 인용하세요.\n6단계 [부분 정보 처리]: 부분적으로만 찾은 경우, 찾은 부분을 명시하고 "추가 정보는 문서의 다른 부분에 있을 수 있습니다"라고 언급하세요.\n\n답변 형식 (구조화된 형식 사용):\n## 답변\n[1-2문장 요약]\n\n## 상세 설명\n[구체적 사실 나열]\n\n## 참조 정보\n- [사실 1]: [출처]\n- [사실 2]: [출처]\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined
Traceback (most recent call last):
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 1409, in query
    context = self._get_context(question, chat_history)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "d:\python\RAG_for_OC_251014\utils\rag_chain.py", line 988, in _get_context
    context = self._get_context_standard(question, domain=domain)
                                                          ^^^^^^
NameError: name 'domain' is not defined

[LLM] 응답 상태: 200
[LLM] 응답 성공: 243자
⚠️ 답변 검증 실패: 금지 구문 사용, 문서 내용과 불일치
🔄 문서 기반 재생성 시도...
[LLM] 요청 시작: ollama - gemma3:latest
[LLM] 엔드포인트: http://localhost:11434/api/generate
[LLM] 입력 길이: 2335자
[LLM] Ollama API 요청 전송 중...
[LLM] 페이로드: {'model': 'gemma3:latest', 'prompt': '이전에 생성된 답변이 문서 기반이 아니었습니다. 제공된 문서만을 사용하여 다시 답변하세요.\n\n⚠️ 중요 규칙:\n1. **문서 우선**: 반드시 제공된 문서에서만 정보를 찾으세요\n2. **금지 구문**: "정보를 찾을 수 없습니다", "없습니다"는 절대 사용하지 마세요\n3. **문서 인용**: 반드시 문서의 내용을 인용하고 페이지/파일 정보를 명시하세요\n4. **구체성**: 문서의 구체적인 수치, 이름, 내용을 정확히 인용하세요\n\n이전 대화:\n이전 대화 없음\n\n제공된 문서:\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #1\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 7\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 11 12 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n6. 출결관리 앱 사용법(부가기능) 7. 휴대전화 설정\n\uf000 전송이력조회 \uf000 모의위치 설정 해제\n○ 출결관리 앱을 이용하여 출결 처리한 이력 정보 조회 ○ 출결관리 앱(app) 서비스는 훈련생 부정출결을 방지하기 위하여 스마트폰\n모의위치 기능을 허용하지 않습니다.\n\uf000 재전송조회\n○ 앱 이용시 시스템 장애로 인한 출결 전송 실패 시 재전송 기능\n\uf000 수강강좌\n○ 강좌에 대한 기본정보 조회\n⇒ [해결방법] (핸드폰)설정 ⇒ 개발자옵션 ⇒ 모의 위치 허용(해제)\n(*메뉴 위치는 제조사 및 OS의 버전에 따라 상이할 수 있습니다)\n(삼성-Android 4.4.2)\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #2\n   파일명: lgd_display_news_2025_oct_20251019133222.pptx\n   페이지: 9\n   청크 타입: slide_summary\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n[이전 슬라이드] 제목 없음\n\n[현재 슬라이드]\n\n[본문]:\nLG디스플레이, OLED 기술 유출 정황 포착…업계 비상\n\n[본문]:\n디스플레이 산업 뉴스\n\n[본문]:\n10월 2일\n\n[본문]:\n2명\n\n[본문]:\n연이은 기술 유출\n\n[본문]:\n최대 15년 징역\n\n[본문]:\n30억원 이하 벌금\n\n[본문]:\n경기 파주 LG디스플레이 공장 압수수색 진행\n\n[본문]:\n직원\n\n[본문]:\n의 기술 자료 외부 유출 혐의 포착\n\n[본문]:\n내부 보안 점검 중 이상 징후 발견, 경찰에 신고\n\n[본문]:\n삼성디스플레이에 이어\n\n[본문]:\n, 업계 전반 경계 강화\n\n[본문]:\n국가 핵심기술 유출 시\n\n[본문]:\n또는\n\n[본문]:\n보안 경고\n\n[본문]:\n산업기술 보호가\n\n[본문]:\n국가 경쟁력의 핵심입니다\n\n[본문]:\n최대 15년 징역형\n\n[본문]:\n출처:\n\n[본문]:\n쿠키뉴스 (2025.10.13)\n\n[다음 슬라이드] 제목 없음\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📄 문서 #3\n   파일명: HRD-Net_출결관리_업무매뉴얼.pdf\n   페이지: 6\n   청크 타입: page_summary\n   섹션: 문서 서두\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\nHRD-Net 출결관리앱 사용자 매뉴얼(훈련생용) 9 10 HRD-Net 출결관리앱 사용자 매뉴얼(훈련생용)\n5. 출결관리 앱 사용법(기본)\n\uf000 입실/퇴실 출결체크\n\uf000 출결관리 앱(app) 실행 및 로그인 ○ 훈련과정 목록에서 입실/퇴실 구분을 선택하면 스마트폰 카메라가 실행되어\n○ 출결관리 앱(app) 실행 후 HRD-Net 회원아이디와 비밀번호를 입력한 후 QR코드를 스캔할 수 있습니다\n확인 버튼을 클릭합니다.\n○ QR코드를 스캔하면 자동으로 출결 전송 됩니다\n\uf000 훈련과정목록\n○ 훈련실시일자에 훈련장소에 도착하면 자동으로 훈련과정이 조회됩니다\n\n질문:\n분자 구조와 성능의 관계는?\n\n이전 답변 (참고용, 개선 필요):\n## 답변\nHRD-Net 출결관리 앱 사용법에 대한 정보만 제공됩니다. 분자 구조와 성능의 관계에 대한 정보는 제공된 문서에서 찾을 수 없습니다.\n\n## 상세 설명\nHRD-Net 출결관리 앱은 훈련생의 출결 체크를 위해 사용되며, QR코드를 스캔하여 자동으로 출결 전송됩니다. 훈련과정 목록에서 입실/퇴실 구분을 선택하면 스마트폰 카메라가 실행됩니다.\n\n## 참조 정보\n- 문서 #1, 페이지 6 / 섹션 "출결관리 앱 사용법(기본)"\n\n위 이전 답변을 개선하여, 제공된 문서에 근거한 구체적이고 명확한 답변을 작성하세요.\n\n답변:', 'stream': False, 'options': {'temperature': 0.3, 'num_ctx': 2048, 'num_predict': 512}}
[LLM] 응답 상태: 200
[LLM] 응답 성공: 228자
✅ 답변 재생성 완료
[OK] 답변: 제공된 문서에는 분자 구조와 성능의 관계에 대한 정보가 없습니다. HRD-Net 출결관리 앱은 훈련생의 출결 체크를 위해 사용되며, QR코드를 스캔하여 자동으로 출결 전송됩니다 (문서 #1, 페이지 6 / 섹션 "출결관리 앱 사용법(기본)").  또한, 훈련과정목록을 ...
[STAT] 신뢰도: 7400.0%
[INFO] 출처: 3개 문서
[TIME] 응답 시간: 32.18초

[쿼리 6/7] DMAC-TRZ와 ACRSA를 비교해주세요
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined

[쿼리 7/7] FRET 효율을 향상시키는 방법은?
------------------------------------------------------------
❌ query() 오류: name 'domain' is not defined
[ERROR] 검색 실패: 오류가 발생했습니다: name 'domain' is not defined


================================================================================
결과 비교
================================================================================

[기준선 (Hybrid OFF)]
  - 성공률: 42.9%
  - 평균 신뢰도: 8400.0%
  - 평균 응답 시간: 24.39초
  - 평균 출처 개수: 3.0개

[Phase 3-4 (Hybrid ON)]
  - 성공률: 42.9%
  - 평균 신뢰도: 8066.7%
  - 평균 응답 시간: 20.39초
  - 평균 출처 개수: 3.0개

[성능 향상]
  - 신뢰도 변화: -4.0%
  - 응답 시간 변화: -16.4%

[INFO] 결과 저장: test_results/performance_comparison_20251106_094921.json

================================================================================
테스트 완료!
================================================================================
